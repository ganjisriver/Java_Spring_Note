# 1. 사용자 정의 보안 기능 구현

## 자동 보안 기능

- Spring boot 프로젝트에서 Spring-Security 의존성을 넣으면 자동적으로 스프링 시큐리티가 작동된다. 하지만, 자동으로 설정된 보안 기능을 쓰기에는 애로사항이 많다.

## 사용자 정의 보안 기능

- 그래서 스프링 시큐리티를 사용할 때, 개발자가 커스텀해서 보안 기능을 정의한다.

- #### WebSecurityConfigureAdapter(추상클래스)
  
  - 스프링시큐리티가 제공하는 WebSecurityConfigureAdapter라는 추상클래스가 있다. 이 추상 클래스를 상속받은 클래스를 생성하고, configuration(HttpSecurity http)을 override하는 메소드를 작성한다. 아래는 그 예시 코드다.

- ```java
  package me.dailycode.securitymemo;
  
  import org.springframework.context.annotation.Configuration;
  import org.springframework.security.config.annotation.web.builders.HttpSecurity;
  import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
  import org.springframework.security.config.annotation.web.configuration
                                                      .WebSecurityConfigurerAdapter;
  
  @Configuration(proxyBeanMethods = false)
  @EnableWebSecurity
  public class SecurityConfig extends WebSecurityConfigurerAdapter {
      @Override
      protected void configure(HttpSecurity http) throws Exception {
          // 인증, 인가 API 호출!
          http.authorizeRequests()
                  .anyRequest().authenticated();
          http.formLogin();
  ```

- @Configuration
  
  - 위 어노테이션을 통해 스프링 빈에 등록해준다.

- @EnableWebScurity 
  
  - 스프링시큐리티를 사용하기 위한 어노테이션이다. 이를 통해 스프링 시큐리티의 필터체인을 활성화 시키고, 스프링 시큐리티와 관련된 설정을 할 수 있다. 
    
    - 필터체인이 뭐지..? 싶으면 옆에 관련 아키텍쳐와 설명글이 나와있다. 정말 감사합니다.  [Spring Security, 제대로 이해하기 - FilterChain](https://gngsn.tistory.com/160)

- configure(HttpSecurity http)
  
  - 여기서 인증, 인가 관련하여 사용자가 원하는대로 커스텀할 수 있게 된다.
  
  - http.authorizeRequests()는 인증 여부를 파악하고, .anyReuqest().authenticated();  부분은 인증된 사용자가 모든 요청을 할 수 있는 것을 의미합니다.
  
  - http.formLogin()은 로그인 폼을 활용하여 사용자가 인증할 수 있게 해줍니다.
